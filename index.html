<!DOCTYPE html>
<html lang="ja" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matsuda Portfolio | Engineer & Creator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700;900&family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', 'Noto Sans JP', sans-serif;
            background-color: #0f172a; /* slate-900 */
            color: #f8fafc; /* slate-50 */
            overflow-x: hidden;
        }

        /* カスタムスクロールバー */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #475569; }

        /* アニメーション */
        .reveal {
            opacity: 0; transform: translateY(20px);
            transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .reveal.active { opacity: 1; transform: translateY(0); }

        /* 3D Tilt Card */
        .tilt-card {
            transform-style: preserve-3d;
            transform: perspective(1000px);
            transition: transform 0.1s ease-out;
        }
        .tilt-content { transform: translateZ(20px); }

        /* 背景装飾 */
        .blob {
            position: absolute; filter: blur(80px); z-index: -1; opacity: 0.4;
            animation: float 20s infinite alternate;
        }
        @keyframes float {
            0% { transform: translate(0, 0) scale(1); }
            100% { transform: translate(30px, -30px) scale(1.1); }
        }

        /* モーダル */
        #modal-overlay { transition: opacity 0.3s ease; }
        .modal-open { opacity: 1; pointer-events: auto; }
        .modal-closed { opacity: 0; pointer-events: none; }

        /* レイアウト定義 */
        @media (min-width: 768px) {
            .sidebar {
                width: 280px; height: 100vh; position: fixed; left: 0; top: 0; overflow-y: auto;
            }
            .main-content {
                margin-left: 280px; width: calc(100% - 280px);
            }
        }
        @media (max-width: 767px) {
            .sidebar { display: none; }
            .main-content { margin-left: 0; width: 100%; padding-bottom: 80px; }
            .mobile-nav {
                position: fixed; bottom: 0; left: 0; width: 100%;
                background: rgba(15, 23, 42, 0.95); backdrop-filter: blur(10px);
                border-top: 1px solid rgba(255,255,255,0.1); z-index: 50;
                display: flex; justify-content: space-around; padding: 12px;
            }
        }

        .view-section { transition: opacity 0.3s ease; }
        .hidden-view { display: none; opacity: 0; }
        
        .cursor-glow {
            width: 400px; height: 400px;
            background: radial-gradient(circle, rgba(56, 189, 248, 0.15), transparent 70%);
            position: fixed; top: 0; left: 0; transform: translate(-50%, -50%);
            pointer-events: none; z-index: 9999; transition: opacity 0.3s;
        }
    </style>
</head>
<body class="antialiased">

    <div class="cursor-glow" id="cursor-glow"></div>

    <!-- サイドバー (PC) -->
    <aside class="sidebar bg-slate-900 border-r border-white/5 flex flex-col p-8 z-40">
        <div class="mb-10">
            <div class="w-16 h-16 rounded-full bg-gradient-to-br from-cyan-400 to-blue-600 mb-4 p-1">
                <div class="w-full h-full rounded-full bg-slate-800 flex items-center justify-center overflow-hidden">
                    <i class="ph-fill ph-user text-3xl text-slate-400"></i>
                </div>
            </div>
            <h1 class="text-xl font-bold text-white tracking-tight">Matsuda Portfolio</h1>
            <p class="text-xs text-slate-400 mt-1">Engineer / Matsuda Lab</p>
        </div>

        <nav class="flex-1 space-y-2">
            <a href="#" onclick="switchView('creative'); return false;" class="nav-item flex items-center gap-3 px-4 py-3 rounded-xl bg-slate-800 text-cyan-400 font-bold transition-all hover:bg-slate-800">
                <i class="ph-bold ph-squares-four"></i> Creative
            </a>
            <a href="#" onclick="switchView('resume'); return false;" class="nav-item flex items-center gap-3 px-4 py-3 rounded-xl text-slate-400 hover:text-white hover:bg-white/5 transition-all">
                <i class="ph-bold ph-read-cv-logo"></i> Resume
            </a>
            <div class="pt-6 mt-6 border-t border-white/5">
                <p class="text-xs text-slate-500 uppercase tracking-wider mb-3">Links</p>
                <a href="#works" class="block px-4 py-2 text-sm text-slate-400 hover:text-white transition-colors">Works</a>
                <a href="#contact" class="block px-4 py-2 text-sm text-slate-400 hover:text-white transition-colors">Contact</a>
            </div>
        </nav>
        <div class="text-xs text-slate-600 mt-auto">&copy; 2024 Matsuda.</div>
    </aside>

    <!-- モバイルナビ -->
    <nav class="mobile-nav md:hidden">
        <button onclick="switchView('creative')" class="flex flex-col items-center text-cyan-400">
            <i class="ph-bold ph-squares-four text-xl"></i><span class="text-[10px] mt-1">Creative</span>
        </button>
        <button onclick="switchView('resume')" class="flex flex-col items-center text-slate-400">
            <i class="ph-bold ph-read-cv-logo text-xl"></i><span class="text-[10px] mt-1">Resume</span>
        </button>
        <button onclick="document.getElementById('contact').scrollIntoView()" class="flex flex-col items-center text-slate-400">
            <i class="ph-bold ph-envelope text-xl"></i><span class="text-[10px] mt-1">Contact</span>
        </button>
    </nav>

    <!-- メインエリア -->
    <main class="main-content relative min-h-screen">
        <div class="blob w-96 h-96 bg-blue-600 rounded-full top-20 right-20 opacity-20"></div>
        <div class="blob w-64 h-64 bg-purple-600 rounded-full bottom-40 left-20 opacity-20" style="animation-delay: -5s;"></div>

        <!-- ============ CREATIVE VIEW ============ -->
        <div id="creative-view" class="view-section p-6 md:p-12 lg:p-16">
            
            <!-- Hero -->
            <header class="flex flex-col lg:flex-row items-center gap-12 mb-32 min-h-[60vh]">
                <div class="lg:w-3/5 reveal">
                    <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-cyan-500/10 border border-cyan-500/20 text-cyan-400 text-xs font-bold mb-6">
                        <span class="w-2 h-2 rounded-full bg-cyan-400 animate-pulse"></span>
                        Available for New Projects
                    </div>
                    <h1 class="text-5xl md:text-7xl font-black leading-tight mb-6">
                        Expand<br><span class="text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-500">Experience.</span>
                    </h1>
                    <p class="text-slate-400 text-lg leading-relaxed max-w-xl mb-8">
                        情報系学部3年 / 松田研究室。<br>
                        Unity, Python, Flutter を駆使し、ハードウェアからソフトウェアまで「体験」を作り出すエンジニア。
                    </p>
                    <div class="flex gap-4">
                        <button onclick="document.getElementById('works').scrollIntoView()" class="px-8 py-3 bg-white text-slate-900 font-bold rounded-full hover:bg-cyan-400 transition-colors">View Works</button>
                        <button onclick="switchView('resume')" class="px-8 py-3 border border-slate-700 text-white font-bold rounded-full hover:border-white transition-colors">Resume</button>
                    </div>
                </div>
                <div class="lg:w-2/5 w-full reveal" style="transition-delay: 0.1s;">
                    <div class="aspect-square rounded-3xl bg-gradient-to-br from-slate-800 to-slate-900 border border-white/5 relative overflow-hidden flex items-center justify-center group tilt-card">
                        <div class="absolute inset-0 bg-grid-slate-700/[0.1] bg-[length:20px_20px]"></div>
                        <div class="tilt-content text-center">
                            <i class="ph-duotone ph-cube text-9xl text-slate-700 group-hover:text-cyan-500 transition-colors duration-500"></i>
                            <p class="mt-4 text-slate-500 font-mono text-sm">Interactive Portfolio</p>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Stats -->
            <section id="about" class="grid grid-cols-2 gap-6 mb-32 reveal max-w-2xl">
                <div class="p-6 bg-slate-800/50 rounded-2xl border border-white/5">
                    <div class="text-3xl font-bold text-white mb-1">8+</div>
                    <div class="text-xs text-slate-400 uppercase tracking-wider">Projects</div>
                </div>
                <div class="p-6 bg-slate-800/50 rounded-2xl border border-white/5">
                    <div class="text-3xl font-bold text-white mb-1">3<span class="text-sm">Years</span></div>
                    <div class="text-xs text-slate-400 uppercase tracking-wider">Unity / C#</div>
                </div>
            </section>

            <!-- Works -->
            <section id="works" class="mb-20">
                <div class="flex items-end justify-between mb-10 reveal">
                    <div>
                        <h2 class="text-3xl font-bold">Featured Works</h2>
                        <p class="text-slate-400 text-sm mt-2">制作実績</p>
                    </div>
                    <div class="flex gap-2 text-sm">
                        <button class="tab-btn active px-4 py-1.5 rounded-full bg-white/10 text-white hover:bg-white/20 transition-all" data-filter="all">All</button>
                        <button class="tab-btn px-4 py-1.5 rounded-full text-slate-400 hover:text-white hover:bg-white/5 transition-all" data-filter="vr">VR/Game</button>
                        <button class="tab-btn px-4 py-1.5 rounded-full text-slate-400 hover:text-white hover:bg-white/5 transition-all" data-filter="app">App</button>
                    </div>
                </div>
                <div id="works-grid" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 reveal"></div>
            </section>

            <!-- Contact -->
            <section id="contact" class="bg-gradient-to-r from-blue-900/40 to-purple-900/40 rounded-3xl p-10 md:p-16 text-center border border-white/5 reveal">
                <h2 class="text-3xl font-bold mb-4">Let's work together.</h2>
                <p class="text-slate-300 mb-8 max-w-lg mx-auto">プロジェクトの詳細やインターンシップについて、お気軽にご連絡ください。</p>
                <a href="mailto:email@example.com" class="inline-flex items-center gap-2 px-8 py-3 bg-white text-slate-900 font-bold rounded-full hover:bg-cyan-400 transition-colors">
                    <i class="ph-bold ph-paper-plane-right"></i> Send Message
                </a>
            </section>
        </div>

        <!-- ============ RESUME VIEW ============ -->
        <div id="resume-view" class="view-section hidden-view p-6 md:p-12 lg:p-16 max-w-4xl">
            <div class="border-b border-white/10 pb-8 mb-12">
                <h2 class="text-3xl font-bold mb-2">Resume</h2>
                <div class="flex flex-wrap gap-4 text-sm text-slate-400">
                    <span class="flex items-center gap-1"><i class="ph-bold ph-student"></i> 松田研究室 (情報の可視化)</span>
                    <span class="flex items-center gap-1"><i class="ph-bold ph-map-pin"></i> Japan</span>
                </div>
            </div>

            <!-- Skills -->
            <div class="mb-16">
                <h3 class="text-lg font-bold text-cyan-400 mb-6 uppercase tracking-wider">Technical Skills</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div>
                        <h4 class="font-bold mb-4 border-l-2 border-slate-700 pl-3">Development</h4>
                        <ul class="space-y-4 text-sm text-slate-300">
                            <li class="flex justify-between"><span>Unity (C#)</span> <span class="text-slate-500">3 Years</span></li>
                            <li class="flex justify-between"><span>HTML/CSS/JS</span> <span class="text-slate-500">2 Years</span></li>
                            <li class="flex justify-between"><span>Flutter (Dart)</span> <span class="text-slate-500">1 Year</span></li>
                            <li class="flex justify-between"><span>Python (ML)</span> <span class="text-slate-500">0.5 Year</span></li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="font-bold mb-4 border-l-2 border-slate-700 pl-3">Design & Hardware</h4>
                        <ul class="space-y-4 text-sm text-slate-300">
                            <li class="flex justify-between"><span>Maya</span> <span class="text-slate-500">3 Years</span></li>
                            <li class="flex justify-between"><span>Fusion 360</span> <span class="text-slate-500">1 Year</span></li>
                            <li class="flex justify-between"><span>UI/UX Design</span> <span class="text-slate-500">2 Years</span></li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- History -->
            <div>
                <h3 class="text-lg font-bold text-cyan-400 mb-6 uppercase tracking-wider">Project History</h3>
                <div class="space-y-4" id="resume-list"></div>
            </div>
        </div>
    </main>

    <!-- 詳細モーダル (拡張版) -->
    <div id="modal-overlay" class="fixed inset-0 bg-slate-900/95 backdrop-blur-md z-[100] modal-closed flex items-center justify-center p-4" onclick="closeModal()">
        <div id="modal-content" class="bg-slate-800 border border-white/10 rounded-2xl w-full max-w-5xl max-h-[95vh] overflow-y-auto shadow-2xl relative" onclick="event.stopPropagation()">
            <button onclick="closeModal()" class="fixed top-6 right-6 w-10 h-10 bg-black/60 rounded-full flex items-center justify-center text-white hover:bg-black/80 transition-colors z-50">
                <i class="ph-bold ph-x"></i>
            </button>
            
            <div class="flex flex-col md:flex-row min-h-[500px]">
                <!-- 左側：メインビジュアル & 情報 -->
                <div class="md:w-1/2 p-0 flex flex-col">
                    <div class="h-64 md:h-80 relative bg-black flex items-center justify-center border-b border-white/5">
                        <img id="modal-img" src="" alt="Project" class="w-full h-full object-contain" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                        <div class="hidden w-full h-full absolute inset-0 flex-col items-center justify-center text-slate-500 text-sm">
                            <i class="ph-duotone ph-image text-3xl mb-2"></i>No Image
                        </div>
                    </div>
                    <div class="p-8 flex-1 bg-slate-800/50">
                         <div id="modal-tags" class="flex gap-2 mb-4"></div>
                        <h3 id="modal-title" class="text-2xl font-bold mb-1 text-white">Title</h3>
                        <p id="modal-sub" class="text-cyan-400 text-sm font-bold mb-6">Subtitle</p>
                        <div class="space-y-6 text-slate-300 text-sm leading-relaxed">
                            <div><h4 class="text-white font-bold mb-1">概要</h4><p id="modal-desc">...</p></div>
                            <div><h4 class="text-white font-bold mb-1">技術的アプローチ</h4><p id="modal-tech">...</p></div>
                            <div class="pt-4 border-t border-white/10">
                                <h4 class="text-slate-500 text-xs uppercase mb-2">Tech Stack</h4>
                                <div id="modal-stack" class="flex flex-wrap gap-2"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 右側：アセットギャラリー (スクロール可能) -->
                <div class="md:w-1/2 bg-slate-900/50 p-8 border-l border-white/5">
                    <h4 class="text-white font-bold mb-4 flex items-center gap-2">
                        <i class="ph-fill ph-images-square text-cyan-400"></i>
                        制作アセット / ギャラリー
                    </h4>
                    <div id="modal-gallery" class="grid grid-cols-1 gap-6 overflow-y-auto max-h-[600px] pr-2">
                        <!-- JSで画像リストを生成 -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const projects = [
            {
                id: 1,
                title: "VR対応型 FPSゲーム",
                category: "vr",
                subtitle: "県プロコン「優良賞」受賞 / 代表作",
                image: "./images/vr_fps.png",
                desc: "Meta Quest 2を使用した、最大6人対戦可能なVRシューティング。ネットワーク対戦対応。",
                tech: "VR酔い防止のためフレームレート維持を最優先。オブジェクトのローポリ化とカリング処理を独自調整。",
                stack: ["Unity", "C#", "Photon", "Maya"],
                gallery: [
                    { src: "./images/fps_weapon_ar.jpg", caption: "Assault Rifle Model (Maya)" },
                    { src: "./images/fps_weapon_hg.jpg", caption: "Handgun Model (Maya)" },
                    { src: "./images/fps_stage_wire.jpg", caption: "Stage Wireframe" }
                ]
            },
            {
                id: 2,
                title: "学内最短経路ナビ",
                category: "app",
                subtitle: "Python / 機械学習 / 学内ツール",
                image: "./images/python_nav.png",
                desc: "キャンパス内の現在地と目的地を入力すると、混雑状況を予測して最短経路を提示。",
                tech: "NetworkXでダイクストラ法を実装。scikit-learnで混雑予測モデルを作成。",
                stack: ["Python", "scikit-learn", "NetworkX"]
            },
            {
                id: 3,
                title: "MailTalk",
                category: "app",
                subtitle: "モバイルアプリ / UI UX",
                image: "./images/mailtalk.png",
                desc: "メールをチャット形式で表示・管理できるアプリ。",
                tech: "IMAPプロトコル解析と独自パーサーによりメール本文をチャット風に整形。",
                stack: ["Flutter", "Dart", "IMAP"]
            },
            {
                id: 4,
                title: "PCペット育成ゲーム",
                category: "vr",
                subtitle: "デスクトップマスコット / 癒やし",
                image: "./images/pc_pet.png",
                desc: "デスクトップ常駐型の癒やし系育成ゲーム。",
                tech: "Windows API制御で背景透過ウィンドウを実現。生活に溶け込むインタラクティブコンテンツ。",
                stack: ["Unity", "C#", "Windows API"],
                gallery: []
            },
            {
                id: 5,
                title: "Wikipedia Golf",
                category: "app",
                subtitle: "Web Game / SPA",
                image: "./images/wiki_golf.png",
                desc: "リンクを辿りゴールを目指すブラウザゲーム。",
                tech: "MediaWiki APIと非同期通信を利用した動的DOM生成。",
                stack: ["JavaScript", "HTML/CSS", "API"]
            },
            {
                id: 6,
                title: "NewDealPoker",
                category: "app",
                subtitle: "Realtime WebSocket",
                image: "./images/poker_game.png",
                desc: "エクイティ分配導入の新ルールポーカー。",
                tech: "WebSocketでのリアルタイム同期とサーバーサイド役判定。",
                stack: ["Node.js", "WebSocket", "JS"]
            },
            {
                id: 7,
                title: "地域助け合いアプリ",
                category: "app",
                subtitle: "Matching App",
                image: "./images/region_app.png",
                desc: "「手伝って」をマッチング。高齢者向けデザイン。",
                tech: "Firebase Firestoreバックエンドとアクセシビリティ対応。",
                stack: ["Flutter", "Firebase"]
            },
            {
                id: 9,
                title: "Classroom Twin",
                category: "model",
                subtitle: "Digital Twin",
                image: "./images/classroom.png",
                desc: "教室を寸法計測し3DCGで完全再現。",
                tech: "Fusion 360のCADデータとMayaモデリングの統合。",
                stack: ["Maya", "Fusion360"],
                gallery: [
                     { src: "./images/class_render.jpg", caption: "Rendered View" },
                     { src: "./images/class_wire.jpg", caption: "Wireframe" }
                ]
            }
        ];

        // --- Render Creative Grid ---
        function renderCreative(filter = 'all') {
            const grid = document.getElementById('works-grid');
            grid.innerHTML = '';
            const filtered = filter === 'all' ? projects : projects.filter(p => p.category === filter || (filter==='vr'&&p.category==='model'));

            filtered.forEach((p, index) => {
                const isLarge = index === 0; 
                const colSpan = isLarge ? 'md:col-span-2 xl:col-span-2' : '';
                const height = isLarge ? 'h-80' : 'h-64';

                const card = document.createElement('div');
                card.className = `${colSpan} group relative rounded-2xl overflow-hidden bg-slate-800 border border-white/5 cursor-pointer tilt-card hover:border-cyan-500/30 transition-all`;
                card.style.animation = `fadeIn 0.5s ease forwards ${index * 100}ms`;
                card.onclick = () => openModal(p.id);

                card.innerHTML = `
                    <div class="${height} w-full relative overflow-hidden bg-black">
                        <img src="${p.image}" class="w-full h-full object-cover opacity-80 group-hover:opacity-100 group-hover:scale-105 transition-all duration-700"
                             onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                        <div class="hidden w-full h-full absolute inset-0 flex items-center justify-center text-slate-600 bg-slate-900 text-sm">No Image</div>
                        <div class="absolute inset-0 bg-gradient-to-t from-slate-900 via-transparent to-transparent opacity-90"></div>
                        <div class="absolute bottom-0 left-0 p-6 w-full transform translate-y-2 group-hover:translate-y-0 transition-transform duration-300">
                            <div class="flex items-center justify-between mb-1">
                                <span class="text-xs font-bold text-cyan-400 uppercase tracking-wider bg-black/50 px-2 py-1 rounded backdrop-blur-sm">${p.stack[0]}</span>
                            </div>
                            <h3 class="text-xl md:text-2xl font-bold text-white mb-1 group-hover:text-cyan-300 transition-colors">${p.title}</h3>
                            <p class="text-sm text-slate-300 line-clamp-1">${p.subtitle}</p>
                        </div>
                    </div>
                `;
                card.addEventListener('mousemove', handleTilt);
                card.addEventListener('mouseleave', resetTilt);
                grid.appendChild(card);
            });
        }

        // --- Render Resume ---
        function renderResume() {
            const list = document.getElementById('resume-list');
            list.innerHTML = projects.map(p => `
                <div class="group flex items-center p-4 rounded-xl bg-slate-800/40 border border-white/5 hover:bg-slate-800 hover:border-cyan-500/30 transition-all cursor-pointer" onclick="openModal(${p.id})">
                    <div class="w-12 h-12 rounded-lg bg-slate-900 flex items-center justify-center mr-4 text-slate-500 group-hover:text-cyan-400 group-hover:bg-cyan-900/20 transition-colors">
                        <i class="ph-fill ph-caret-right text-xl"></i>
                    </div>
                    <div class="flex-1">
                        <h4 class="text-white font-bold group-hover:text-cyan-400 transition-colors">${p.title}</h4>
                        <p class="text-xs text-slate-400">${p.subtitle}</p>
                    </div>
                    <div class="text-right hidden sm:block">
                        <span class="text-xs text-slate-500 bg-slate-900 px-2 py-1 rounded border border-slate-700">${p.stack[0]}</span>
                    </div>
                </div>
            `).join('');
        }

        // --- Switch View ---
        function switchView(mode) {
            const creative = document.getElementById('creative-view');
            const resume = document.getElementById('resume-view');
            const navItems = document.querySelectorAll('.nav-item');

            if (mode === 'creative') {
                creative.classList.remove('hidden-view'); resume.classList.add('hidden-view');
                navItems[0].classList.add('bg-slate-800', 'text-cyan-400'); navItems[0].classList.remove('text-slate-400');
                navItems[1].classList.remove('bg-slate-800', 'text-cyan-400'); navItems[1].classList.add('text-slate-400');
                window.scrollTo(0,0);
                setTimeout(() => window.dispatchEvent(new Event('scroll')), 100);
            } else {
                creative.classList.add('hidden-view'); resume.classList.remove('hidden-view');
                navItems[1].classList.add('bg-slate-800', 'text-cyan-400'); navItems[1].classList.remove('text-slate-400');
                navItems[0].classList.remove('bg-slate-800', 'text-cyan-400'); navItems[0].classList.add('text-slate-400');
                window.scrollTo(0,0);
            }
        }

        // --- Modal (Gallery Support) ---
        const modalOverlay = document.getElementById('modal-overlay');
        function openModal(id) {
            const p = projects.find(x => x.id === id);
            if (!p) return;

            document.getElementById('modal-img').src = p.image;
            document.getElementById('modal-title').innerText = p.title;
            document.getElementById('modal-sub').innerText = p.subtitle;
            document.getElementById('modal-desc').innerText = p.desc;
            document.getElementById('modal-tech').innerText = p.tech;

            document.getElementById('modal-stack').innerHTML = p.stack.map(s => 
                `<span class="px-2 py-1 rounded bg-slate-700 text-cyan-300 text-xs border border-slate-600">${s}</span>`
            ).join('');
            
            document.getElementById('modal-tags').innerHTML = 
                `<span class="px-2 py-1 rounded bg-cyan-500/20 text-cyan-400 text-xs font-bold uppercase">${p.category}</span>`;

            // ギャラリー生成
            const galleryContainer = document.getElementById('modal-gallery');
            galleryContainer.innerHTML = '';
            
            if (p.gallery && p.gallery.length > 0) {
                p.gallery.forEach(item => {
                    const div = document.createElement('div');
                    div.className = 'bg-black/50 rounded-xl overflow-hidden border border-white/5';
                    div.innerHTML = `
                        <div class="h-48 relative flex items-center justify-center bg-black">
                             <img src="${item.src}" class="w-full h-full object-contain" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                             <div class="hidden w-full h-full absolute inset-0 flex-col items-center justify-center text-slate-600 text-xs">
                                <i class="ph-duotone ph-image text-2xl mb-1"></i>No Image
                             </div>
                        </div>
                        <div class="p-3 bg-slate-800/80">
                            <p class="text-xs text-slate-400 font-mono">${item.caption}</p>
                        </div>
                    `;
                    galleryContainer.appendChild(div);
                });
            } else {
                 galleryContainer.innerHTML = `
                    <div class="h-full flex flex-col items-center justify-center text-slate-500 opacity-50 border-2 border-dashed border-slate-700 rounded-xl min-h-[200px]">
                        <i class="ph-duotone ph-image-square text-4xl mb-2"></i>
                        <span class="text-xs">No additional assets</span>
                    </div>
                 `;
            }

            modalOverlay.classList.remove('modal-closed');
            modalOverlay.classList.add('modal-open');
            document.body.style.overflow = 'hidden';
        }
        function closeModal() {
            modalOverlay.classList.remove('modal-open');
            modalOverlay.classList.add('modal-closed');
            document.body.style.overflow = '';
        }

        // --- Tilt Logic ---
        function handleTilt(e) {
            const rect = this.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            const centerX = rect.width / 2;
            const centerY = rect.height / 2;
            const rotateX = ((y - centerY) / centerY) * -3;
            const rotateY = ((x - centerX) / centerX) * 3;
            this.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale3d(1.01, 1.01, 1.01)`;
        }
        function resetTilt() {
            this.style.transform = `perspective(1000px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)`;
        }

        // --- Mouse Glow ---
        const glow = document.getElementById('cursor-glow');
        window.addEventListener('mousemove', (e) => {
            glow.style.left = e.clientX + 'px';
            glow.style.top = e.clientY + 'px';
        });

        // --- Filter ---
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.onclick = () => {
                document.querySelectorAll('.tab-btn').forEach(b => {
                    b.classList.remove('active', 'bg-white/10', 'text-white');
                    b.classList.add('text-slate-400');
                });
                btn.classList.add('active', 'bg-white/10', 'text-white');
                btn.classList.remove('text-slate-400');
                renderCreative(btn.dataset.filter);
            };
        });

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => { if(entry.isIntersecting) entry.target.classList.add('active'); });
        }, { threshold: 0.1 });
        document.querySelectorAll('.reveal').forEach(el => observer.observe(el));

        renderCreative();
        renderResume();
    </script>
</body>
</html>